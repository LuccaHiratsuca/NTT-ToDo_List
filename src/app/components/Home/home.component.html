<div class="container mt-3">
    <div class="text-center mb-4">
        <h1>Task Manager</h1>
        <p>Manage your tasks efficiently</p>
    </div>
    
    <div class="mt-3">
        <input type="text" [(ngModel)]="newTask.title" placeholder="Title" class="form-control">
        <input type="text" [(ngModel)]="newTask.description" placeholder="Description" class="form-control mt-2">
        <button class="btn btn-primary mt-2" (click)="addTask()">Add Task <i class="bi bi-plus-lg"></i></button>
    </div>
    
    <h2 class="my-tasks-title mt-4 mb-3">My Tasks:</h2>
    
    <div *ngIf="tasksService.tasks.length === 0" class="alert alert-warning">
        No tasks found! Start adding some.
    </div>
    
    <div *ngIf="tasksService.tasks.length > 0">
        <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let task of tasksService.tasks; let i = index" [ngClass]="{'list-group-item-success': task.done}">
            <div>
            {{ task.title }} - {{ task.description }}
            <span class="badge bg-primary rounded-pill">{{task.done ? 'Done' : 'Pending'}}</span>
            </div>
            <div>
            <button class="btn btn-outline-secondary btn-sm" (click)="toggleDone(i)">
                <i class="bi bi-check2-circle"></i>
            </button>
            <button class="btn btn-outline-primary btn-sm ms-1" (click)="openUpdateModal(task, i)">
                <i class="bi bi-pencil-square"></i>
            </button>
            <button class="btn btn-outline-danger btn-sm ms-1" (click)="tasksService.deleteTask(i)">
                <i class="bi bi-trash"></i>
            </button>
            </div>
        </li>
        </ul>
    </div>

    <!-- Update Task Modal -->
    <div class="modal fade" id="updateTaskModal" tabindex="-1" aria-labelledby="updateTaskModalLabel" aria-hidden="true" #updateModal>
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateTaskModalLabel">Update Task</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="hideModal()" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <input type="text" [(ngModel)]="editableTask.title" placeholder="Title" class="form-control">
                <input type="text" [(ngModel)]="editableTask.description" placeholder="Description" class="form-control mt-2">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="hideModal()">Close</button>
                <button type="button" class="btn btn-primary" (click)="updateTask()">Save changes</button>
            </div>
        </div>
        </div>
    </div>

</div>
